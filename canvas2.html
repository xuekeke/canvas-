<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>刮刮乐</title>
	<style type="text/css">
#pic{
	width: 700px;
	height: 700px;
	margin: 0 auto;
	position:relative;
}
#canvas1,#canvas2{
	position:absolute;
	top: 200px;
	left: 200px; 
	display: block;
}






	</style>
</head>
<body>
	<div id="pic">
	<canvas id="canvas1"></canvas>
	<canvas id="canvas2"></canvas>
	</div>



	<script type="text/javascript">
	 var canvas1=document.getElementById("canvas1");
	 var canvas2=document.getElementById("canvas2");
	 canvas1.width=300;
	 canvas1.height=200;
	 canvas2.width=300;
	 canvas2.height=200;
	 var ctx1=canvas1.getContext("2d");
	 var ctx2=canvas2.getContext("2d");
	 var img=new Image();
	 var randomName="img/bg"+Math.floor(Math.random()*2)+".png";
	 	 img.src=randomName;
	 var mousedown=false;

	 canvas2.addEventListener("mousedown",doMousedown,false);
	 canvas2.addEventListener("mousemove",doMousemove,false);
	 canvas2.addEventListener("mouseup",doMouseup,false);
	 img.onload=function(){
	 	initCanvas()
	 }
	function initCanvas(){
		ctx1.drawImage(img,0,0,300,200)
		draw();
	}
	function doMousedown(){
		mousedown=true;
	}
	function doMouseup(){
		mousedown=false;
	}
	function doMousemove(e){
		if(mousedown){
		var x=e.offsetX;
		var y=e.offsetY;
		ctx2.beginPath();
		ctx2.clearRect(x,y,20,20);			
		}
	}

	function draw(){
		ctx2.beginPath();
		ctx2.fillStyle="#eee";
		ctx2.fillRect(0,0,300,200);
		ctx2.fill();

	}



	</script>
</body>
</html>